# yaml-language-server: $schema=.schema.json
name: Anthropic
id: anthropic
pricing_urls:
  - https://www.anthropic.com/pricing#api
api_pattern: 'https://api\.anthropic\.com'
# see https://github.com/anthropics/anthropic-sdk-python/blob/main/src/anthropic/types/model_param.py for ids
model_match:
  contains: claude
provider_match:
  contains: anthropic
# https://github.com/anthropics/anthropic-sdk-python/blob/v0.62.0/src/anthropic/types/usage.py#L12
extractors:
  - root: usage
    mappings:
      - path: input_tokens
        dest: input_tokens
        # when Anthropic quotes prices for input tokens, they included all input tokens
      - path: cache_creation_input_tokens
        dest: input_tokens
        required: false
      - path: cache_read_input_tokens
        dest: input_tokens
        required: false
      - path: cache_creation_input_tokens
        dest: cache_write_tokens
        required: false
      - path: cache_read_input_tokens
        dest: cache_read_tokens
        required: false
      - path: output_tokens
        dest: output_tokens

# See https://github.com/anthropics/anthropic-sdk-python/blob/v0.69.0/src/anthropic/types/model.py
models:
  - id: claude-2
    name: Claude 2.0 / 2.1
    description: >
      Claude 2 is Anthropic's previous generation model, offering reliable performance
      for various tasks. This includes Claude 2.0 and Claude 2.1.
    match:
      or:
        - starts_with: claude-2
        - contains: claude-v2
    context_window: 200000
    prices:
      input_mtok: 8
      output_mtok: 24
    prices_checked: 2025-06-23

  - id: claude-3-5-haiku-latest
    name: Claude Haiku 3.5
    description: Fastest, most cost-effective model
    match:
      or:
        - starts_with: claude-3-5-haiku
        - starts_with: claude-3.5-haiku
    context_window: 200000
    prices_checked: 2025-08-08
    prices:
      input_mtok: 0.8
      cache_write_mtok: 1
      cache_read_mtok: 0.08
      output_mtok: 4

  - id: claude-3-5-sonnet
    name: Claude Sonnet 3.5
    description: >-
      Claude 3.5 Sonnet is an ideal balance of intelligence and speed for enterprise workloads.
      Maximum utility at a lower price, dependable, balanced for scaled deployments.
    match:
      or:
        - starts_with: claude-3-5-sonnet
        - starts_with: claude-3.5-sonnet
    context_window: 200000
    prices:
      input_mtok: 3
      cache_write_mtok: 3.75
      cache_read_mtok: 0.3
      output_mtok: 15

  - id: claude-3-7-sonnet-latest
    name: Claude Sonnet 3.7
    description: >-
      Claude 3.7 Sonnet is an advanced large language model with improved reasoning, coding, and problem-solving capabilities.
    match:
      or:
        - starts_with: claude-3-7-sonnet
        - starts_with: claude-3.7-sonnet
        - starts_with: claude-sonnet-3.7
        - starts_with: claude-sonnet-3-7
    context_window: 200000
    prices_checked: 2025-08-08
    prices:
      input_mtok: 3
      cache_write_mtok: 3.75
      cache_read_mtok: 0.3
      output_mtok: 15

  - id: claude-3-haiku
    name: Claude Haiku 3
    description: Fastest, most cost-effective model
    match:
      starts_with: claude-3-haiku
    context_window: 200000
    prices_checked: 2025-08-08
    prices:
      input_mtok: 0.25
      cache_write_mtok: 0.3
      cache_read_mtok: 0.03
      output_mtok: 1.25

  - id: claude-3-opus-latest
    name: Claude Opus 3
    description: >-
      Claude 3 Opus was Anthropic's most powerful model for highly complex tasks.
      It boasts top-level performance, intelligence, fluency, and understanding.
    match:
      starts_with: claude-3-opus
    context_window: 200000
    prices:
      input_mtok: 15
      cache_write_mtok: 18.75
      cache_read_mtok: 1.5
      output_mtok: 75

  - id: claude-3-sonnet
    name: Claude 3 Sonnet
    description: >-
      Claude 3 Sonnet is an ideal balance of intelligence and speed for enterprise workloads.
      Maximum utility at a lower price, dependable, balanced for scaled deployments.
    match:
      starts_with: claude-3-sonnet
    context_window: 200000
    prices:
      input_mtok: 3
      cache_write_mtok: 3.75
      cache_read_mtok: 0.3
      output_mtok: 15

  - id: claude-haiku-4-5
    name: Claude Haiku 4.5
    description: Fastest and most intelligent Haiku model
    match:
      or:
        - starts_with: claude-haiku-4-5
        - starts_with: claude-4.5-haiku
    context_window: 200000
    prices_checked: 2025-10-15
    prices:
      input_mtok: 1
      cache_write_mtok: 1.25
      cache_read_mtok: 0.10
      output_mtok: 5

  - id: claude-opus-4-0
    name: Claude Opus 4
    description: Most intelligent model for complex tasks
    match:
      or:
        - starts_with: claude-opus-4-0
        - starts_with: claude-4-opus
        - equals: claude-opus-4-20250514
    context_window: 200000
    prices_checked: 2025-09-29
    prices:
      input_mtok: 15
      cache_write_mtok: 18.75
      cache_read_mtok: 1.5
      output_mtok: 75

  - id: claude-opus-4-1
    name: Claude Opus 4.1
    description: Most intelligent model for complex tasks
    match:
      starts_with: claude-opus-4-1
    context_window: 200000
    collapse: true
    prices_checked: 2025-09-29
    prices:
      input_mtok: 15
      cache_write_mtok: 18.75
      cache_read_mtok: 1.5
      output_mtok: 75

  - id: claude-sonnet-4-0
    name: Claude Sonnet 4
    description: Optimal balance of intelligence, cost, and speed
    match:
      or:
        - starts_with: claude-sonnet-4-2025
        - starts_with: claude-sonnet-4-0
        - starts_with: claude-sonnet-4@
        - equals: claude-sonnet-4
        - starts_with: claude-4-sonnet
    context_window: 200000
    prices_checked: 2025-09-29
    prices:
      input_mtok: 3
      cache_write_mtok: 3.75
      cache_read_mtok: 0.3
      output_mtok: 15

  - id: claude-sonnet-4-5
    name: Claude Sonnet 4.5
    description: Most intelligent model for building agents and coding
    match:
      starts_with: claude-sonnet-4-5
    context_window: 1000000
    prices_checked: 2025-09-29
    prices:
      input_mtok:
        base: 3
        tiers:
          - start: 200000
            price: 6
      cache_read_mtok:
        base: 0.30
        tiers:
          - start: 200000
            price: 0.60
      cache_write_mtok:
        base: 3.75
        tiers:
          - start: 200000
            price: 7.50
      output_mtok:
        base: 15
        tiers:
          - start: 200000
            price: 22.50
